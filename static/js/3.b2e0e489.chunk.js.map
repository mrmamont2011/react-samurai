{"version":3,"sources":["hoc/withAuthRedirect.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusWihtHook.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","_React$Component","Object","D_1react_react_way_of_samurai_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_1react_react_way_of_samurai_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_1react_react_way_of_samurai_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","D_1react_react_way_of_samurai_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","D_1react_react_way_of_samurai_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","props","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","to","React","connect","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","__webpack_require__","d","__webpack_exports__","module","exports","descriptionBlock","postsBlock","posts","item","ProfileStatusWihtHook","_useState","useState","_useState2","slicedToArray","editMode","setEditMode","_useState3","status","_useState4","setStatus","useEffect","react_default","onDoubleClick","onChange","e","currentTarget","autoFocus","onBlur","updateStatus","ProfileInfo","profile","className","s","src","photos","large","ProfileInfo_ProfileStatusWihtHook","Preloader","Post","message","likesCount","maxLength10","maxLengthCreator","AddPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","name","component","Textarea","validate","required","MyPosts","memo","postsElements","map","p","MyPosts_Post_Post","createRef","console","log","values","addPost","addPostForm","MyPostsContainer","profilePage","newPostText","dispatch","addPostActionCreator","Profile","Profile_ProfileInfo_ProfileInfo","MyPosts_MyPostsContainer","ProfileContainer","userId","match","params","autorizedUserId","getUserProfile","getStatus","components_Profile_Profile","assign","compose","withRouter"],"mappings":"uMAIIA,EAA6B,SAACC,GAAD,MAAY,CACzCC,OAAQD,EAAME,KAAKD,SAGVE,EAAmB,SAACC,GAAc,IAErCC,EAFqC,SAAAC,GAAA,SAAAD,IAAA,OAAAE,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GAAAE,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,EAAA,EAAAP,CAAAF,EAAAC,GAAAC,OAAAQ,EAAA,EAAAR,CAAAF,EAAA,EAAAW,IAAA,SAAAC,MAAA,WAInC,OAAKR,KAAKS,MAAMjB,OAETkB,EAAAC,EAAAC,cAACjB,EAAcK,KAAKS,OAFIC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUC,GAAG,eAJTlB,EAAA,CAEXmB,IAAMpB,WAUtC,OAFqCqB,YAAQ1B,EAAR0B,CAAoCpB,sCCf9D,SAAAqB,EAAAC,EAAAC,GACf,OCJe,SAAAD,GACf,GAAAE,MAAAC,QAAAH,GAAA,OAAAA,EDGSI,CAAcJ,IEJR,SAAAA,EAAAC,GACf,IAAAI,EAAA,GACAC,GAAA,EACAC,GAAA,EACAC,OAAAC,EAEA,IACA,QAAAC,EAAAC,EAAAX,EAAAY,OAAAC,cAA6CP,GAAAI,EAAAC,EAAAG,QAAAC,QAC7CV,EAAAW,KAAAN,EAAApB,QAEAW,GAAAI,EAAAY,SAAAhB,GAH4EK,GAAA,IAKzE,MAAAY,GACHX,GAAA,EACAC,EAAAU,EACG,QACH,IACAZ,GAAA,MAAAK,EAAA,QAAAA,EAAA,SACK,QACL,GAAAJ,EAAA,MAAAC,GAIA,OAAAH,EFnBgCc,CAAoBnB,EAAAC,IGJrC,WACf,UAAAmB,UAAA,wDHGgEC,GAJhEC,EAAAC,EAAAC,EAAA,sBAAAzB,yBICA0B,EAAAC,QAAA,CAAkBC,iBAAA,4DCAlBF,EAAAC,QAAA,CAAkBE,WAAA,4BAAAC,MAAA,6CCAlBJ,EAAAC,QAAA,CAAkBI,KAAA,4JCsEHC,EApEe,SAACxC,GAAU,IAAAyC,EACPC,oBAAS,GADFC,EAAAtD,OAAAuD,EAAA,EAAAvD,CAAAoD,EAAA,GAChCI,EADgCF,EAAA,GACtBG,EADsBH,EAAA,GAAAI,EAEXL,mBAAS1C,EAAMgD,QAFJC,EAAA5D,OAAAuD,EAAA,EAAAvD,CAAA0D,EAAA,GAEhCC,EAFgCC,EAAA,GAExBC,EAFwBD,EAAA,GAIrCE,oBAAW,WACPD,EAAUlD,EAAMgD,SAClB,CAAChD,EAAMgD,SAgBL,OACII,EAAAlD,EAAAC,cAAA,YACM0C,GACEO,EAAAlD,EAAAC,cAAA,WACIiD,EAAAlD,EAAAC,cAAA,QAAMkD,cAlBD,WACrBP,GAAY,KAiB6C9C,EAAMgD,QAAU,YAGhEH,GACGO,EAAAlD,EAAAC,cAAA,WACIiD,EAAAlD,EAAAC,cAAA,SAAOmD,SAdJ,SAACC,GACpBL,EAAUK,EAAEC,cAAczD,QAauB0D,WAAW,EAAMC,OAnB3C,WACvBZ,GAAY,GACZ9C,EAAM2D,aAAaX,IAiB2EjD,MAAOiD,OCV9FY,EAnBK,SAAC5D,GACjB,OAAKA,EAAM6D,QAKPT,EAAAlD,EAAAC,cAAA,WAKIiD,EAAAlD,EAAAC,cAAA,OAAK2D,UAAWC,IAAE3B,kBACdgB,EAAAlD,EAAAC,cAAA,OAAK6D,IAAKhE,EAAM6D,QAAQI,OAAOC,QAC/Bd,EAAAlD,EAAAC,cAACgE,EAAD,CAAuBnB,OAAQhD,EAAMgD,OAAQW,aAAc3D,EAAM2D,iBAXlEP,EAAAlD,EAAAC,cAACiE,EAAA,EAAD,mDCQAC,EAZF,SAACrE,GACZ,OACEoD,EAAAlD,EAAAC,cAAA,OAAK2D,UAAWC,IAAExB,MAChBa,EAAAlD,EAAAC,cAAA,OAAK6D,IAAI,4FACLhE,EAAMsE,QACNlB,EAAAlD,EAAAC,cAAA,WACFiD,EAAAlD,EAAAC,cAAA,oBADE,IACkBH,EAAMuE,gDCF9BC,EAAcC,YAAiB,IAqB7BC,EAAmBC,YAAU,CAACC,KAAM,yBAAjBD,CAnBP,SAAC3E,GACf,OAAQoD,EAAAlD,EAAAC,cAAA,QAAM0E,SAAU7E,EAAM8E,cAClB1B,EAAAlD,EAAAC,cAAA,WAEIiD,EAAAlD,EAAAC,cAAC4E,EAAA,EAAD,CAAQC,KAAO,cAAcC,UAAYC,IAEzCC,SAAU,CAACC,IAAUZ,MAEzBpB,EAAAlD,EAAAC,cAAA,WAEIiD,EAAAlD,EAAAC,cAAA,8BA8CLkF,EAnCC/E,IAAMgF,KAAK,SAAAtF,GAOvB,IAAIuF,EAAgBvF,EAAMsC,MAAMkD,IAAK,SAAAC,GAAC,OAAIrC,EAAAlD,EAAAC,cAACuF,EAAD,CAAMpB,QAASmB,EAAEnB,QAASC,WAAYkB,EAAElB,eAE7DjE,IAAMqF,YAS3B,OAFAC,QAAQC,IAAI,eAGRzC,EAAAlD,EAAAC,cAAA,OAAK2D,UAAWC,IAAE1B,YACde,EAAAlD,EAAAC,cAAA,sBACAiD,EAAAlD,EAAAC,cAAA,WACGiD,EAAAlD,EAAAC,cAACuE,EAAD,CAAkBG,SAXb,SAACiB,GAEb9F,EAAM+F,QAAQD,EAAOE,iBAYjB5C,EAAAlD,EAAAC,cAAA,OAAK2D,UAAWC,IAAEzB,OACZiD,cCjCHU,EAFU1F,YAhBD,SAACzB,GACrB,MAAO,CACHwD,MAAOxD,EAAMoH,YAAY5D,MACzB6D,YAAarH,EAAMoH,YAAYC,cAIZ,SAACC,GACxB,MAAO,CAEHL,QAAS,SAACC,GACNI,EAASC,YAAqBL,OAKjBzF,CAA6C8E,GCRvDiB,EATC,SAACtG,GACb,OACIoD,EAAAlD,EAAAC,cAAA,WACIiD,EAAAlD,EAAAC,cAACoG,EAAD,CAAa1C,QAAS7D,EAAM6D,QAASb,OAAQhD,EAAMgD,OAAQW,aAAc3D,EAAM2D,eAC/EP,EAAAlD,EAAAC,cAACqG,EAAD,iCCANC,8LAGE,IAAIC,EAASnH,KAAKS,MAAM2G,MAAMC,OAAOF,OAChCA,IAEDA,EAASnH,KAAKS,MAAM6G,iBAExBtH,KAAKS,MAAM8G,eAAeJ,GAC1BnH,KAAKS,MAAM+G,UAAUL,oCAIrB,OACItD,EAAAlD,EAAAC,cAAC6G,EAAD3H,OAAA4H,OAAA,GAAa1H,KAAKS,MAAlB,CAAyB6D,QAAStE,KAAKS,MAAM6D,QAASb,OAAQzD,KAAKS,MAAMgD,OAAQW,aAAcpE,KAAKS,MAAM2D,uBAdvFrD,IAAMpB,WA0BtBgI,sBACXjI,IACAsB,YATkB,SAACzB,GAAD,MAAY,CAC9B+E,QAAS/E,EAAMoH,YAAYrC,QAC3Bb,OAAQlE,EAAMoH,YAAYlD,OAC1B6D,gBAAiB/H,EAAME,KAAK0H,OAC5B3H,OAAQD,EAAME,KAAKD,SAKM,CAAC+H,mBAAgBC,cAAWpD,mBACrDwD,IAHWD,CAIbT","file":"static/js/3.b2e0e489.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to='/login' />\r\n\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n\r\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__2_UAH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__Svh7X\",\"posts\":\"MyPosts_posts__2ThvY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3k6Qf\"};","import React, { useEffect, useState } from 'react';\r\nimport s from './ProfileInfo.module.css';\r\n\r\nconst ProfileStatusWihtHook = (props) => {\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(props.status);\r\n\r\n    useEffect( () => {\r\n        setStatus(props.status);\r\n    },[props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatus(status);\r\n    }\r\n\r\n    const onStatusChange = (e) => {\r\n        setStatus(e.currentTarget.value);\r\n       \r\n    }\r\n \r\n        return (\r\n            <div>\r\n                {!editMode &&\r\n                    <div>\r\n                        <span onDoubleClick={activateEditMode }>{props.status || \"-------\"}</span>\r\n                    </div>\r\n                }\r\n                {editMode &&\r\n                    <div>\r\n                        <input onChange={onStatusChange} autoFocus={true} onBlur={deactivateEditMode} value={status}/>\r\n                    </div>\r\n                }\r\n            </div>\r\n        )\r\n    \r\n}\r\n\r\n\r\n/*\r\n\r\n\r\n{\r\n    state = {\r\n        editMode: false,\r\n        status: this.props.status\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevProps.status !== this.props.status) {\r\n            this.setState({\r\n                status: this.props.status\r\n            });\r\n        }\r\n\r\n        // console.log(\"componentDidUpdate\")\r\n    }\r\n\r\n\r\n}\r\n*/\r\n\r\nexport default ProfileStatusWihtHook;","import React from 'react';\r\nimport s from './ProfileInfo.module.css';\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport ProfileStatusWihtHook from \"./ProfileStatusWihtHook\"\r\n\r\nconst ProfileInfo = (props) => {\r\n    if (!props.profile) {\r\n        return <Preloader />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n          {/*  <div>\r\n                <img\r\n                    src='https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&cs=tinysrgb&h=350'/>\r\n            </div>*/}\r\n            <div className={s.descriptionBlock}>\r\n                <img src={props.profile.photos.large} />\r\n                <ProfileStatusWihtHook status={props.status} updateStatus={props.updateStatus}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport s from './Post.module.css';\r\n\r\nconst Post = (props) => {\r\n  return (\r\n    <div className={s.item}>\r\n      <img src='https://movies4maniacs.liberty.me/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg' />\r\n        { props.message }\r\n          <div>\r\n        <span>like</span> { props.likesCount }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Post;","import React, {Component} from 'react';\r\nimport s from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {reduxForm, Field} from 'redux-form';\r\nimport { required, maxLengthCreator } from '../../../utils/validator/validator';\r\nimport {Textarea} from '../../common/FormsControls/FormControls' \r\n\r\nlet maxLength10 = maxLengthCreator(10);\r\n\r\nlet AddPostForm = (props) => {\r\n    return  <form onSubmit={props.handleSubmit}>\r\n                <div>\r\n\r\n                    <Field  name = 'addPostForm' component= {Textarea}\r\n\r\n                    validate={[required, maxLength10]}/>\r\n                </div>\r\n                <div>\r\n\r\n                    <button>Add post</button>\r\n                </div>\r\n            </form>;\r\n\r\n                \r\n}\r\n\r\n\r\n\r\nconst AddPostFormRedux = reduxForm({form: 'ProfileAddNewPostForm'})(AddPostForm);\r\n\r\nconst MyPosts = React.memo(props => {\r\n\r\n    // shouldComponentUpdate(nextProps, nextState) {\r\n    //     return nextProps != this.props;\r\n    // }\r\n\r\n \r\n    let postsElements = props.posts.map( p => <Post message={p.message} likesCount={p.likesCount}/>);\r\n\r\n    let newPostElement = React.createRef();\r\n\r\n    let onAddPost = (values) => {\r\n        \r\n        props.addPost(values.addPostForm);\r\n    }\r\n\r\n    console.log('render test');\r\n\r\n    return (\r\n        <div className={s.postsBlock}>\r\n            <h3>My posts</h3>\r\n            <div>\r\n               <AddPostFormRedux onSubmit={onAddPost}/>\r\n               \r\n            </div>\r\n            <div className={s.posts}>\r\n                { postsElements }\r\n             </div>\r\n        </div>\r\n    )\r\n    \r\n});\r\n\r\n\r\n\r\nexport default MyPosts;","import React from 'react';\r\nimport {addPostActionCreator, updateNewPostTextActionCreator} from \"../../../redux/profile-reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n        newPostText: state.profilePage.newPostText\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n        addPost: (addPostForm) => {\r\n            dispatch(addPostActionCreator(addPostForm));\r\n        }\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;","import React from 'react';\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\n\r\nconst Profile = (props) => {\r\n    return (\r\n        <div>\r\n            <ProfileInfo profile={props.profile} status={props.status} updateStatus={props.updateStatus}/>\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {getStatus, getUserProfile, updateStatus} from \"../../redux/profile-reducer\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        let userId = this.props.match.params.userId;\r\n        if (!userId) {\r\n         \r\n            userId = this.props.autorizedUserId;\r\n        }\r\n        this.props.getUserProfile(userId);\r\n        this.props.getStatus(userId);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Profile {...this.props} profile={this.props.profile} status={this.props.status} updateStatus={this.props.updateStatus}/>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    autorizedUserId: state.auth.userId,\r\n    isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default compose(\r\n    withAuthRedirect,\r\n    connect(mapStateToProps, {getUserProfile, getStatus, updateStatus}),\r\n    withRouter\r\n)(ProfileContainer);\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}